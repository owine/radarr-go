{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended",
    "helpers:pinGitHubActionDigests",
    ":configMigration",
    ":pinDevDependencies",
    "abandonments:recommended",
    "customManagers:githubActionsVersions",
    ":gomod",
    ":enableVulnerabilityAlerts",
    ":rebaseStalePrs",
    ":semanticCommits",
    ":automergeMinor",
    ":automergeLinters",
    ":automergeDigest"
  ],
  "labels": [
    "dependencies"
  ],
  "dependencyDashboard": true,
  "postUpdateOptions": [
    "gomodTidy",
    "gomodUpdateImportPaths",
    "gomodMassage"
  ],
  "packageRules": [
    {
      "description": "Pin Docker image digests in Dockerfiles for security",
      "matchDatasources": [
        "docker"
      ],
      "matchManagers": [
        "dockerfile"
      ],
      "pinDigests": true
    },
    {
      "description": "Group all Node.js version updates together",
      "matchDatasources": [
        "docker",
        "node-version"
      ],
      "matchPackageNames": [
        "node"
      ],
      "groupName": "Node.js version updates",
      "addLabels": [
        "node"
      ]
    },
    {
      "description": "Group all Go version updates together",
      "matchDatasources": [
        "docker",
        "golang-version"
      ],
      "matchPackageNames": [
        "golang",
        "go"
      ],
      "groupName": "Go version updates",
      "addLabels": [
        "go"
      ]
    },
    {
      "description": "Group PostgreSQL version updates across dev and CI",
      "matchDatasources": [
        "docker"
      ],
      "matchPackageNames": [
        "postgres"
      ],
      "groupName": "PostgreSQL version updates",
      "addLabels": [
        "database",
        "postgres"
      ]
    },
    {
      "description": "Group MariaDB version updates across dev and CI",
      "matchDatasources": [
        "docker"
      ],
      "matchPackageNames": [
        "mariadb"
      ],
      "groupName": "MariaDB version updates",
      "addLabels": [
        "database",
        "mariadb"
      ]
    },
    {
      "description": "All non-major updates - grouped together across all ecosystems",
      "matchUpdateTypes": [
        "minor",
        "patch"
      ],
      "groupName": "Non-major dependencies",
      "addLabels": [
        "dependencies"
      ]
    },
    {
      "description": "Go ecosystem labels",
      "matchManagers": [
        "gomod"
      ],
      "addLabels": [
        "go"
      ]
    },
    {
      "description": "npm ecosystem labels",
      "matchManagers": [
        "npm"
      ],
      "addLabels": [
        "npm"
      ]
    },
    {
      "description": "Docker ecosystem labels",
      "matchManagers": [
        "dockerfile",
        "docker-compose"
      ],
      "addLabels": [
        "docker"
      ]
    },
    {
      "description": "GitHub Actions ecosystem labels",
      "matchManagers": [
        "github-actions"
      ],
      "addLabels": [
        "github-actions"
      ]
    },
    {
      "description": "Docker-compose updates - disable digest pinning",
      "matchManagers": [
        "docker-compose"
      ],
      "pinDigests": false
    },
    {
      "description": "GitHub Actions updates - enable digest pinning",
      "matchManagers": [
        "github-actions"
      ],
      "pinDigests": true
    },
    {
      "description": "Major updates - separate PRs for manual review",
      "matchUpdateTypes": [
        "major"
      ],
      "addLabels": [
        "major"
      ]
    },
    {
      "description": "Security updates - immediate processing with highest priority",
      "matchPackageNames": [
        "*"
      ],
      "isVulnerabilityAlert": true,
      "addLabels": [
        "security"
      ],
      "prPriority": 10
    }
  ]
}
